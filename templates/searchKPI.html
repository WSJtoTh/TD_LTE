<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>searchKPI</title>
	<script src="/static/js/jquery.min.js" type="text/javascript"></script>
</head>
<link rel="stylesheet" type="text/css" href="/static/css/searchKPI.css">
<link rel="stylesheet" href="/static/css/reset.css"/>
<link rel="stylesheet" href="/static/css/BeatPicker.min.css"/>
<link rel="stylesheet" href="/static/css/demos.css"/>
<link rel="stylesheet" href="/static/css/prism.css"/>
<script src="http://www.jq22.com/jquery/jquery-1.10.2.js"></script>
<script src="/static/js/BeatPicker.min.js"></script>
<script src="/static/js/prism.js"></script>
<script type="text/javascript" src="/static/js/searchKPI.js"></script>
<script>
	
	$(function(){
		var timer = function(){};

		$(".nav>li").hover(function(){
			clearTimeout(timer);
			$(this).children('ul').stop(true,true).show();
		},function(){
			var self = $(this);
			timer = setTimeout(function(){
				self.children('ul').stop(true,true).hide();	
			}, 100);
		});
	});
</script>
<body>
	
	<div id="content">


		<!--DEMO start-->
		<div class="menu">
			<div class="logo">
				TD-LTE
			</div>
			<ul class="nav">


				<li><a {% url 'upTbCellIndex' %}>数据管理</a>
					<ul class="sub-nav">
						<li><a href={% url 'upTbCellIndex' %}>数据导入</a></li>
						<li><a href={% url 'previewIndex' %}>数据导出</a></li>

					</ul>
				</li>
				<li><a {% url 'searchCellIndex' %}>数据查询</a>
					<ul class="sub-nav">
						<li><a href={% url 'searchCellIndex' %}>小区配置信息查询</a></li>
						<li><a href={% url 'searchEnodebIndex' %}>基站eNodeB查询</a></li>
						<li><a href={% url 'searchKPIIndex' %}>KPI指标查询</a></li>
						<li><a href={% url 'searchPRBIndex'%}>PRB信息查询</a></li>

					</ul>
				</li>
				<li><a href={% url 'analy3cellIndex'%}>数据分析</a>
					<ul class="sub-nav">
						<li><a href={% url 'analy3cellIndex'%}>查询重叠覆盖干扰三元组</a></li>
						<li><a href={% url 'analyC2IIndex'%}>主邻小区C2I干扰分析</a></li>

					</ul>
				</li>
			</ul>
			<div id="out">
				<a href={% url 'loginIndex' %} >Log Out</a>
			</div>
		</div>
	</div>


	<!--DEMO end-->
	<div class="info">
		<div class="title">
			<h2>KPI指标信息查询</h2>
		</div>

		<div class="choose">
            <form action="/searchKPI/" method="POST">
			<div id="chooseName">
				<label>请选择小区名称：</label>
				<input type="text" id="txt_name" list="name" name="name" autocomplete="off"/>
				<datalist id="name"> 
						{% for name in Name_List %}
    						<option value="{{name.cell}}"></option>
						{% empty %}
							<option value="无数据"></option>
						{% endfor %}
				</datalist>

			</div>
			<br>
			<div id="chooseAttr">
				<label>请选择属性：</label> 
				<input type="text" id="txt_attr" list="attr" name="attr" autocomplete="off" />
				<datalist id="attr"> 
					<option value="小区信息" /> 
					<option value="小区名称" /> 
					<option value="RRC连接建立完成次数（无）" /> 
					<option value="RRC连接建立完成次数（包括重发）" /> 
					<option value="RRC建立成功率qf(%)" />
					<option value="E-RAB建立成功总次数 (无)" />
					<option value="E-RAB建立尝试总次数 (无)" />
					<option value="E-RAB建立成功率2(%)" />
					<option value="eNodeB触发的E-RAB异常释放总次数 (无)" />
					<option value="小区切换出E-RAB异常释放总次数 (无)" />
					<option value="E-RAB掉线率(新)（%）" />
					<option value="无线接通率ay（%）" />
					<option value="eNodeB发起的S1 RESET导致的UE Context释放次数 (无)" />
					<option value="UE Context异常释放次数 (无)" />
					<option value="UE Context建立成功总次数 (无)" />
					<option value="无线掉线率（%）" />
					<option value="eNodeB内异频切换出成功次数 (无)" />
					<option value="eNodeB内异频切换出尝试次数 (无)" />
					<option value="eNodeB内同频切换出成功次数 (无)" />
					<option value="eNodeB内异频切换出尝试次数 (无)" />
					<option value="eNodeB间异频切换出成功次数 (无)" />
					<option value="eNodeB间异频切换出尝试次数 (无)" />
					<option value="eNodeB间同频切换出成功次数 (无)" />
					<option value="eNodeB间同频切换出尝试次数 (无)" />
					<option value="eNB内切换成功率（%）" />
					<option value="eNB间切换成功率（%）" />
					<option value="同频切换成功率zsp（%）" />
					<option value="异频切换成功率zsp（%）" />
					<option value="切换成功率（%）" />
					<option value="小区PDCP层所接收到的上行数据的总吞吐量 (比特)" />
					<option value="小区PDCP层所发送到的下行数据的总吞吐量 (比特)" />
					<option value="RRC重建请求次数（无）" />
					<option value="RRC连接重建比率（%）" />
					<option value="通过重建回源小区的eNodeB间同频切换出执行成功次数 (无)" />
					<option value="通过重建回源小区的eNodeB间异频切换出执行成功次数 (无)" />
					<option value="通过重建回源小区的eNodeB内同频切换出执行成功次数 (无)" />
					<option value="通过重建回源小区的eNodeB内异频切换出执行成功次数 (无)" />
					<option value="eNB内切换出成功次数（次）" />
					<option value="eNB内切换出请求次数（次）" />

				</datalist>

			</div>
			<div class="time">
				<!--	<div id="simple" class="demo">-->

					<div class="sample">

						<label class="tips"> StartTime:</label>
						<input type="text" data-beatpicker="true" id="startTime" name="startTime"/>
						<br>

						<label class="tips">EndTime:</label>  
						<input type="text" data-beatpicker="true" id="endTime" name="endTime"/>
						
					</div>

					<!--</div>-->
				</div>
				<input type="submit" name="submit" id="submitInfo" >
            </form>
        </div>

			<div class="pic">
				<div id="main" style="height:10px;width: 10px"></div>
				<!--ECharts单文件引入 -->
				<script src="http://echarts.baidu.com/build/dist/echarts.js"></script>
				<script type="text/javascript" src="/static/js/searchKPI.js"></script>


				<!---------------------------------------------------------- 折线图----------------------------------------------------->
				<!-- 为ECharts准备一个具备大小（宽高）的Dom -->
				<div id="main2" style="height:400px;width: 700px"></div>
				<!-- ECharts单文件引入 -->
				<script src="http://echarts.baidu.com/build/dist/echarts.js"></script>
			</div>

		</div>

	<script>
			var attr={{ attr|safe }};
			var name={{ name|safe }};
			var result_list={{ result|safe }};
			var length_list={{ length|safe }};
			var date_list={{ dateList|safe}};
			console.log(attr);
			console.log(result_list.length);
			console.log(result_list);
			for(var i=0;i<result_list.length;i++)
			{
					console.log(result_list[i]);
					console.log(date_list[i]);
			}

			//for(var i=0;i<10;i++)
			//	console.log(result_list[i]);
			//day_list=[];
			/*for(var i=0;i<result_list.length;i++)
			{
					day_list.append(i);
			}*/


 var myChart = "";
    // 路径配置
    require.config({
        paths: {
            echarts: 'http://echarts.baidu.com/build/dist'
        }
    });

    // 使用
    require(
        [
            'echarts',
            'echarts/chart/bar' // 使用柱状图就加载bar模块，按需加载
        ],
        function (ec) {
            // 基于准备好的dom，初始化echarts图表
            myChart = ec.init(document.getElementById('main'));


            // 为echarts对象加载数据
          //  myChart.setOption(option);

        }
    );

     require.config({
        paths: {
            echarts: 'http://echarts.baidu.com/build/dist'
        }
    });

    // 使用
    require(
        [
            'echarts',
            'echarts/chart/line' // 使用柱状图就加载bar模块，按需加载
        ],
        function (ec) {
            // 基于准备好的dom，初始化echarts图表
            var myChart = ec.init(document.getElementById('main2'));

            var option1 = {
                title : {
                    text: 'KPI指标信息查询',
                    subtext: name
				},
                tooltip : {
                    trigger: 'axis'
                },
                legend: {
                    data:[attr]
                },
                grid:{
                    containLabel:true
                },
                calculable : true,
                toolbox: {
                    show : true,
                    feature : {
                        mark : {show: true},
                        dataView : {show: true, readOnly: false},
                        magicType : {show: true, type: ['line', 'bar']},
                        restore : {show: true},
                        saveAsImage : {show: true}
                    }
                },
                xAxis : [
                    {
                        type : 'category',
                        boundaryGap : false,
                        data :  date_list
                    }
                ],
                yAxis : [
                    {
                        type : 'value',
                        axisLabel : {
                            formatter: '{value} '
                        }
                    }
                ],
                series : [
                    {
                         name:attr,
                        type:'line',
                        data:result_list,
                    }
                ]
            };
            // 为echarts对象加载数据
            myChart.setOption(option1);
        }
    );

	</script>

	</body>
	</html>